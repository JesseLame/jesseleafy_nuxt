{"version":3,"file":"useRecipeLanguage-BUF9LebE.js","sources":["../../../../node_modules/nuxt/dist/app/composables/state.js","../../../../composables/useRecipeLanguage.ts"],"sourcesContent":["import { isRef, toRef } from \"vue\";\nimport { useNuxtApp } from \"../nuxt.js\";\nimport { toArray } from \"../utils.js\";\nconst useStateKeyPrefix = \"$s\";\nexport function useState(...args) {\n  const autoKey = typeof args[args.length - 1] === \"string\" ? args.pop() : void 0;\n  if (typeof args[0] !== \"string\") {\n    args.unshift(autoKey);\n  }\n  const [_key, init] = args;\n  if (!_key || typeof _key !== \"string\") {\n    throw new TypeError(\"[nuxt] [useState] key must be a string: \" + _key);\n  }\n  if (init !== void 0 && typeof init !== \"function\") {\n    throw new Error(\"[nuxt] [useState] init must be a function: \" + init);\n  }\n  const key = useStateKeyPrefix + _key;\n  const nuxtApp = useNuxtApp();\n  const state = toRef(nuxtApp.payload.state, key);\n  if (state.value === void 0 && init) {\n    const initialValue = init();\n    if (isRef(initialValue)) {\n      nuxtApp.payload.state[key] = initialValue;\n      return initialValue;\n    }\n    state.value = initialValue;\n  }\n  return state;\n}\nexport function clearNuxtState(keys) {\n  const nuxtApp = useNuxtApp();\n  const _allKeys = Object.keys(nuxtApp.payload.state).map((key) => key.substring(useStateKeyPrefix.length));\n  const _keys = !keys ? _allKeys : typeof keys === \"function\" ? _allKeys.filter(keys) : toArray(keys);\n  for (const _key of _keys) {\n    const key = useStateKeyPrefix + _key;\n    if (key in nuxtApp.payload.state) {\n      nuxtApp.payload.state[key] = void 0;\n    }\n  }\n}\n","import { watch } from 'vue'\n\nexport type RecipeLang = 'en' | 'nl'\n\ntype SupportedLanguage = {\n  code: RecipeLang\n  label: string\n}\n\nconst supportedLanguages: SupportedLanguage[] = [\n  { code: 'en', label: 'English' },\n  { code: 'nl', label: 'Nederlands' }\n]\n\nconst isRecipeLang = (value: string | null): value is RecipeLang => value === 'en' || value === 'nl'\n\nexport function useRecipeLanguage() {\n  const language = useState<RecipeLang>('recipe-language', () => 'en')\n  const initialized = useState<boolean>('recipe-language-initialized', () => false)\n\n  if (process.client && !initialized.value) {\n    const storedLanguage = localStorage.getItem('recipe_language')\n    if (isRecipeLang(storedLanguage)) {\n      language.value = storedLanguage\n    }\n\n    watch(\n      language,\n      (nextLanguage) => {\n        localStorage.setItem('recipe_language', nextLanguage)\n      },\n      { immediate: true }\n    )\n\n    initialized.value = true\n  }\n\n  const setLanguage = (nextLanguage: RecipeLang) => {\n    language.value = nextLanguage\n  }\n\n  return {\n    language,\n    setLanguage,\n    supportedLanguages\n  }\n}\n"],"names":[],"mappings":";;AAGA,MAAM,oBAAoB;AACnB,SAAS,YAAY,MAAM;AAChC,QAAM,UAAU,OAAO,KAAK,KAAK,SAAS,CAAC,MAAM,WAAW,KAAK,IAAG,IAAK;AACzE,MAAI,OAAO,KAAK,CAAC,MAAM,UAAU;AAC/B,SAAK,QAAQ,OAAO;AAAA,EACxB;AACE,QAAM,CAAC,MAAM,IAAI,IAAI;AACrB,MAAI,CAAC,QAAQ,OAAO,SAAS,UAAU;AACrC,UAAM,IAAI,UAAU,6CAA6C,IAAI;AAAA,EACzE;AACE,MAAI,SAAS,UAAU,OAAO,SAAS,YAAY;AACjD,UAAM,IAAI,MAAM,gDAAgD,IAAI;AAAA,EACxE;AACE,QAAM,MAAM,oBAAoB;AAChC,QAAM,UAAU,WAAY;AAC5B,QAAM,QAAQ,MAAM,QAAQ,QAAQ,OAAO,GAAG;AAC9C,MAAI,MAAM,UAAU,UAAU,MAAM;AAClC,UAAM,eAAe,KAAM;AAC3B,QAAI,MAAM,YAAY,GAAG;AACvB,cAAQ,QAAQ,MAAM,GAAG,IAAI;AAC7B,aAAO;AAAA,IACb;AACI,UAAM,QAAQ;AAAA,EAClB;AACE,SAAO;AACT;ACnBA,MAAM,qBAA0C;AAAA,EAC9C,EAAE,MAAM,MAAM,OAAO,UAAU;AAAA,EAC/B,EAAE,MAAM,MAAM,OAAO,aAAa;AACpC;AAIO,SAAS,oBAAoB;AAClC,QAAM,WAAW,SAAqB,mBAAmB,MAAM,IAAI;AAC/C,WAAkB,+BAA+B,MAAM,KAAK;AAmB1E,QAAA,cAAc,CAAC,iBAA6B;AAChD,aAAS,QAAQ;AAAA,EACnB;AAEO,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;","x_google_ignoreList":[0]}