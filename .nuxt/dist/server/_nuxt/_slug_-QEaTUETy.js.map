{"version":3,"file":"_slug_-QEaTUETy.js","sources":["../../../../composables/useComments.ts","../../../../pages/recipes/[lang]/[slug].vue"],"sourcesContent":["import { ref } from 'vue';\nimport { createClient } from '@supabase/supabase-js';\n\nexport function useComments(postId: string) {\n\tconst config = useRuntimeConfig();\n\n\tconst supabase = createClient(config.public.supabaseUrl, config.public.supabaseAnonKey);\n\n\tconst comments = ref<any[]>([]);\n\tconst loading = ref(false);\n\tconst error = ref<null | string>(null);\n\n\tasync function fetchComments() {\n\t\tloading.value = true;\n\t\terror.value = null;\n\n\t\ttry {\n\t\t\tconst { data, error: fetchError } = await supabase.from('comments').select().eq('post_id', postId).order('created_at', { ascending: false });\n\n\t\t\tif (fetchError) throw fetchError;\n\n\t\t\tconst flatComments = (data ?? []).filter((c) => c.text?.trim() || c.author_name?.trim());\n\n            console.log('Fetched Comments:', flatComments);\n\n\t\t\tcomments.value = nestComments(flatComments);\n\n            console.log('Nested Comments:', comments.value);\n\t\t} catch (err: any) {\n\t\t\terror.value = err.message || 'Failed to fetch comments';\n\t\t} finally {\n\t\t\tloading.value = false;\n\t\t}\n\t}\n\n\n    async function addComment(text: string, author_name: string, parentId: number | null = null) {\n\t\terror.value = null;\n        console.log('Adding comment:', { text, author_name, postId, parentId });\n\n\t\ttry {\n\t\t\tconst { data, error: insertError } = await supabase\n\t\t\t\t.from('comments')\n\t\t\t\t.insert([{ text, author_name, post_id: postId, parent_id: parentId }])\n\t\t\t\t.select();\n\n\t\t\tif (insertError) throw insertError;\n\n\t\t\t// Optional: prepend new comment to the local list\n\t\t\tif (data && data.length > 0) {\n\t\t\t\tconst newComment = { ...data[0], replies: [] };\n\n\t\t\t\tif (parentId === null) {\n\t\t\t\t\t// Top-level comment: add to root\n\t\t\t\t\tcomments.value.unshift(newComment);\n\t\t\t\t} else {\n\t\t\t\t\t// Reply: find the parent and push into its replies\n\t\t\t\t\tinsertReply(comments.value, parentId, newComment);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err: any) {\n\t\t\terror.value = err.message || 'Failed to add comment';\n\t\t}\n\t}\n\n    function nestComments(flatComments: any[]) {\n\t\tconst map: Record<number, any> = {};\n\t\tconst roots: any[] = [];\n\n\t\t// Initialize and create a map\n\t\tfor (const comment of flatComments) {\n\t\t\tcomment.replies = [];\n\t\t\tmap[comment.id] = comment;\n\t\t}\n\n\t\t// Build tree\n\t\tfor (const comment of flatComments) {\n\t\t\tif (comment.parent_id) {\n\t\t\t\tconst parent = map[comment.parent_id];\n\t\t\t\tif (parent) {\n\t\t\t\t\tparent.replies.push(comment);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\troots.push(comment);\n\t\t\t}\n\t\t}\n\n\t\treturn roots;\n\t}\n\n    function insertReply(commentTree: any[], parentId: number, newReply: any): boolean {\n\t\tfor (const comment of commentTree) {\n\t\t\tif (comment.id === parentId) {\n\t\t\t\tcomment.replies.unshift(newReply);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Recurse through children if they exist\n\t\t\tif (comment.replies?.length) {\n\t\t\t\tconst inserted = insertReply(comment.replies, parentId, newReply);\n\t\t\t\tif (inserted) return true;\n\t\t\t}\n\t\t}\n\n\t\treturn false; // Not found\n\t}\n\n\treturn {\n\t\tcomments,\n\t\tloading,\n\t\terror,\n\t\tfetchComments,\n        addComment\n\t};\n}\n","<script setup lang=\"ts\">\nimport { computed, onMounted, ref, toRaw, watch, watchEffect } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport MarkdownIt from 'markdown-it'\nimport type { RecipeLang } from '~/composables/useRecipeLanguage'\n\ntype IngredientGroups = Record<string, string[]>\n\ntype RecipePageCopy = {\n    languageLabel: string\n    addToGroceries: string\n    ingredients: string\n    instructions: string\n    comments: string\n    yourName: string\n    writeComment: string\n    submitComment: string\n    reply: string\n    writeReply: string\n    submitReply: string\n    noComments: string\n    recipeNotFound: string\n    translationUnavailable: (targetLanguageLabel: string) => string\n    fallbackSeoTitle: string\n    fallbackSeoDescription: string\n}\n\nconst copyByLanguage: Record<RecipeLang, RecipePageCopy> = {\n    en: {\n        languageLabel: 'Language',\n        addToGroceries: 'Add to groceries list',\n        ingredients: 'Ingredients',\n        instructions: 'Instructions',\n        comments: 'Comments',\n        yourName: 'Your name',\n        writeComment: 'Write a comment...',\n        submitComment: 'Submit Comment',\n        reply: 'Reply',\n        writeReply: 'Write a reply...',\n        submitReply: 'Submit Reply',\n        noComments: 'No comments yet.',\n        recipeNotFound: 'Recipe not found.',\n        translationUnavailable: (targetLanguageLabel: string) => `This recipe is not available in ${targetLanguageLabel} yet.`,\n        fallbackSeoTitle: 'Recipe',\n        fallbackSeoDescription: \"A delicious recipe from Jesse's Leafy Feasts.\"\n    },\n    nl: {\n        languageLabel: 'Taal',\n        addToGroceries: 'Toevoegen aan boodschappenlijst',\n        ingredients: 'Ingredienten',\n        instructions: 'Instructies',\n        comments: 'Reacties',\n        yourName: 'Je naam',\n        writeComment: 'Schrijf een reactie...',\n        submitComment: 'Plaats reactie',\n        reply: 'Beantwoorden',\n        writeReply: 'Schrijf een antwoord...',\n        submitReply: 'Plaats antwoord',\n        noComments: 'Nog geen reacties.',\n        recipeNotFound: 'Recept niet gevonden.',\n        translationUnavailable: (targetLanguageLabel: string) => `Dit recept is nog niet beschikbaar in ${targetLanguageLabel}.`,\n        fallbackSeoTitle: 'Recept',\n        fallbackSeoDescription: \"Een heerlijk recept van Jesse's Leafy Feasts.\"\n    }\n}\n\nconst md = new MarkdownIt()\nconst route = useRoute()\nconst router = useRouter()\nconst { language, setLanguage, supportedLanguages } = useRecipeLanguage()\n\nconst slug = computed(() => String(route.params.slug || ''))\n\nconst isRecipeLang = (value: unknown): value is RecipeLang => value === 'en' || value === 'nl'\n\nconst routeLang = computed<RecipeLang | null>(() => {\n    return isRecipeLang(route.params.lang) ? route.params.lang : null\n})\n\nconst activeLanguage = computed<RecipeLang>(() => routeLang.value ?? 'en')\nconst copy = computed(() => copyByLanguage[activeLanguage.value])\nconst translationAvailabilityMessage = ref('')\n\nwatch(routeLang, (nextLanguage) => {\n    if (nextLanguage && language.value !== nextLanguage) {\n        setLanguage(nextLanguage)\n    }\n}, { immediate: true })\n\nwatch([routeLang, slug], () => {\n    translationAvailabilityMessage.value = ''\n})\n\nconst { comments, error, fetchComments, addComment } = useComments(slug.value)\n\nconst newText = ref('')\nconst newAuthor = ref('')\nconst replyTexts = ref<Record<number, string>>({})\nconst replyAuthors = ref<Record<number, string>>({})\nconst showReplyForm = ref<Record<number, boolean>>({})\n\nconst { data: recipe } = await useAsyncData(\n    () => `recipe-${routeLang.value ?? 'invalid'}-${slug.value}`,\n    () => {\n        if (!routeLang.value) {\n            return null\n        }\n        return queryCollection('recipes').path(`/recipes/${routeLang.value}/${slug.value}`).first()\n    },\n    { watch: [routeLang, slug] }\n)\n\nconst ingredientsSplit = computed(() => recipe.value && !Array.isArray(recipe.value.ingredients))\n\nconst descriptionLongHTML = computed(() => {\n    const raw = recipe.value?.description_long || ''\n    return md.render(raw.replace(/\\\\n/g, '\\n'))\n})\n\nconst extractRecipeSlugFromHref = (href: string): string | null => {\n    const withLanguage = href.match(/^\\/recipes\\/(?:en|nl)\\/([^/]+?)(?:\\.md)?$/)\n    if (withLanguage) {\n        return withLanguage[1]\n    }\n\n    const withoutLanguage = href.match(/^\\/recipes\\/([^/]+?)(?:\\.md)?$/)\n    if (withoutLanguage) {\n        return withoutLanguage[1]\n    }\n\n    return null\n}\n\nconst normalizeRecipeHref = (href: string): string => {\n    const linkedSlug = extractRecipeSlugFromHref(href)\n    if (!linkedSlug) {\n        return href\n    }\n\n    return `/recipes/${activeLanguage.value}/${linkedSlug}`\n}\n\nconst parseIngredient = (item: string): string => {\n    const linkRegex = /\\((\\/[^\\s)]+)\\)/\n    const match = item.match(linkRegex)\n\n    if (!match) {\n        return item\n    }\n\n    const text = item.replace(linkRegex, '').trim()\n    const normalizedHref = normalizeRecipeHref(match[1])\n    return `<a href=\"${normalizedHref}\" class=\"text-green-600 underline hover:text-green-800\">${text}</a>`\n}\n\nconst setIngredientsAsGroceries = () => {\n    if (!recipe.value?.ingredients) {\n        return\n    }\n\n    let rawIngredients: string[]\n    if (Array.isArray(recipe.value.ingredients)) {\n        rawIngredients = [...toRaw(recipe.value.ingredients)]\n    } else {\n        rawIngredients = Object.values(toRaw(recipe.value.ingredients) as IngredientGroups).flat()\n    }\n\n    const groceries = rawIngredients.map((item) => ({\n        name: item,\n        checked: false\n    }))\n\n    localStorage.setItem('groceries', JSON.stringify(groceries))\n    window.location.href = '/list'\n}\n\nconst formatDate = (dateStr: string) => {\n    const options: Intl.DateTimeFormatOptions = {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: false\n    }\n    return new Date(dateStr).toLocaleString(undefined, options)\n}\n\nconst switchLanguage = async (targetLanguage: RecipeLang) => {\n    translationAvailabilityMessage.value = ''\n\n    if (!routeLang.value || targetLanguage === routeLang.value) {\n        return\n    }\n\n    const translatedRecipe = await queryCollection('recipes').path(`/recipes/${targetLanguage}/${slug.value}`).first()\n    if (!translatedRecipe) {\n        const targetLanguageLabel = supportedLanguages.find((option) => option.code === targetLanguage)?.label ?? targetLanguage\n        translationAvailabilityMessage.value = copy.value.translationUnavailable(targetLanguageLabel)\n        return\n    }\n\n    setLanguage(targetLanguage)\n    await router.push(`/recipes/${targetLanguage}/${slug.value}`)\n}\n\nasync function submitComment() {\n    await addComment(newText.value, newAuthor.value)\n    newText.value = ''\n    newAuthor.value = ''\n}\n\nasync function submitReply(parentId: number) {\n    const text = replyTexts.value[parentId]\n    const author = replyAuthors.value[parentId]\n\n    if (!text || !author) {\n        return\n    }\n\n    await addComment(text, author, parentId)\n    replyTexts.value[parentId] = ''\n    replyAuthors.value[parentId] = ''\n}\n\nfunction toggleReplyForm(commentId: number) {\n    showReplyForm.value[commentId] = !showReplyForm.value[commentId]\n}\n\nonMounted(async () => {\n    await fetchComments()\n})\n\nwatchEffect(() => {\n    useSeoMeta({\n        title: recipe.value?.title || copy.value.fallbackSeoTitle,\n        description: recipe.value?.description || copy.value.fallbackSeoDescription\n    })\n})\n</script>\n\n<template>\n    <div v-if=\"recipe\" class=\"mx-4 sm:mx-auto mt-10 mb-16 w-full max-w-3xl bg-white shadow-xl rounded-xl p-4 sm:p-8\">\n        <div class=\"mb-4\">\n            <div class=\"flex flex-wrap items-center gap-2\">\n                <span class=\"text-sm font-medium text-gray-700\">{{ copy.languageLabel }}:</span>\n                <button v-for=\"option in supportedLanguages\" :key=\"option.code\"\n                    class=\"px-3 py-1 text-sm rounded-full border transition-colors\" :class=\"activeLanguage === option.code\n                        ? 'bg-green-600 text-white border-green-600'\n                        : 'bg-white text-gray-700 border-gray-300'\" @click=\"switchLanguage(option.code)\">\n                    {{ option.label }}\n                </button>\n            </div>\n            <p v-if=\"translationAvailabilityMessage\" class=\"mt-2 text-sm text-amber-700\">\n                {{ translationAvailabilityMessage }}\n            </p>\n        </div>\n\n        <img v-if=\"recipe.image\" :src=\"recipe.image\" :alt=\"recipe.title\" class=\"w-full aspect-square object-cover rounded-lg mb-6\" />\n\n        <h1 class=\"text-2xl sm:text-4xl font-bold mb-4 text-gray-900\">{{ recipe.title }}</h1>\n        <p class=\"text-base sm:text-lg text-gray-600 mb-8\">{{ recipe.description }}</p>\n\n        <div v-if=\"descriptionLongHTML\" class=\"text-gray-700 mb-6 prose\" v-html=\"descriptionLongHTML\"></div>\n\n        <button @click=\"setIngredientsAsGroceries\"\n            class=\"mt-6 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition\">\n            {{ copy.addToGroceries }}\n        </button>\n\n        <section>\n            <h2 class=\"text-2xl font-semibold text-green-700 mb-3\">{{ copy.ingredients }}</h2>\n\n            <ul v-if=\"!ingredientsSplit\" class=\"list-disc list-inside space-y-1 text-gray-800\">\n                <li v-for=\"(item, index) in recipe.ingredients\" :key=\"index\" v-html=\"parseIngredient(item as string)\">\n                </li>\n            </ul>\n\n            <div v-else class=\"space-y-4\">\n                <div v-for=\"(items, section) in recipe.ingredients\" :key=\"section\">\n                    <h3 class=\"text-xl font-semibold text-green-600 mb-1 capitalize\">\n                        {{ String(section).replace(/_/g, ' ') }}\n                    </h3>\n                    <ul class=\"list-disc list-inside space-y-1 text-gray-800\">\n                        <li v-for=\"item in items\" :key=\"item\" v-html=\"parseIngredient(item)\"></li>\n                    </ul>\n                </div>\n            </div>\n        </section>\n\n        <section class=\"mt-8\">\n            <h2 class=\"text-2xl font-semibold text-green-700 mb-3\">{{ copy.instructions }}</h2>\n            <ol class=\"list-decimal list-inside space-y-2 text-gray-800\">\n                <li v-for=\"step in recipe.instructions\" :key=\"step\">{{ step }}</li>\n            </ol>\n        </section>\n\n        <section class=\"mt-10\">\n            <h2 class=\"text-2xl font-semibold text-green-700 mb-3\">{{ copy.comments }}</h2>\n\n            <div class=\"mb-6\">\n                <input v-model=\"newAuthor\" type=\"text\" :placeholder=\"copy.yourName\" class=\"w-full p-2 mb-2 border rounded\" />\n                <textarea v-model=\"newText\" :placeholder=\"copy.writeComment\" class=\"w-full p-2 border rounded\" rows=\"3\"></textarea>\n                <button @click=\"submitComment\" class=\"mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700\">\n                    {{ copy.submitComment }}\n                </button>\n                <p v-if=\"error\" class=\"text-red-500 mt-2\">{{ error }}</p>\n            </div>\n\n            <div v-if=\"comments.length\" class=\"space-y-4\">\n                <div v-for=\"comment in comments\" :key=\"comment.id\" class=\"p-4 border rounded-lg bg-gray-50\">\n                    <div class=\"text-sm text-gray-500 mb-1\">\n                        <span class=\"font-semibold text-gray-800\">{{ comment.author_name }}</span>\n                        <span>â€¢</span>\n                        <span>{{ formatDate(comment.created_at) }}</span>\n                    </div>\n                    <p class=\"text-gray-800\">{{ comment.text }}</p>\n\n                    <div v-if=\"comment.replies && comment.replies.length\" class=\"ml-4 mt-2 space-y-2\">\n                        <div v-for=\"reply in comment.replies\" :key=\"reply.id\"\n                            class=\"text-sm text-gray-700 bg-white p-2 rounded border\">\n                            <strong>{{ reply.author_name }}:</strong> {{ reply.text }}\n                        </div>\n                    </div>\n\n                    <button @click=\"toggleReplyForm(comment.id)\" class=\"mt-2 text-green-600 text-sm hover:underline\">\n                        {{ copy.reply }}\n                    </button>\n\n                    <div v-if=\"showReplyForm[comment.id]\" class=\"ml-4 mt-3\">\n                        <input v-model=\"replyAuthors[comment.id]\" type=\"text\" :placeholder=\"copy.yourName\"\n                            class=\"w-full p-2 mb-1 border rounded text-sm\" />\n                        <textarea v-model=\"replyTexts[comment.id]\" :placeholder=\"copy.writeReply\"\n                            class=\"w-full p-2 border rounded text-sm\" rows=\"2\"></textarea>\n                        <button @click=\"submitReply(comment.id)\"\n                            class=\"mt-2 px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600\">\n                            {{ copy.submitReply }}\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div v-else class=\"text-gray-500\">{{ copy.noComments }}</div>\n        </section>\n    </div>\n\n    <div v-else class=\"text-center text-gray-500 py-20\">\n        <p>{{ copy.recipeNotFound }}</p>\n    </div>\n</template>\n\n<style>\nli a {\n    color: #059669;\n    text-decoration: underline;\n}\n\nli a:hover {\n    color: #047857;\n    text-decoration: underline;\n}\n</style>\n"],"names":["_withAsyncContext","_unref","_ssrRenderAttrs","_mergeProps","_ssrInterpolate","_ssrRenderList"],"mappings":"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"}